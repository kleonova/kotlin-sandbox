# 
–í–æ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker exec -it kafka bash




order_created
order_paid
order_shipped
order_cancelled


# kafka-topics
–≠—Ç–æ CLI-—É—Ç–∏–ª–∏—Ç–∞, –ø–æ—Å—Ç–∞–≤–ª—è–µ–º–∞—è —Å Apache Kafka. –û–Ω–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –°–æ–∑–¥–∞–≤–∞—Ç—å —Ç–æ–ø–∏–∫–∏ (--create)
- –£–¥–∞–ª—è—Ç—å —Ç–æ–ø–∏–∫–∏ (--delete)
- –û–ø–∏—Å—ã–≤–∞—Ç—å —Ç–æ–ø–∏–∫–∏ (--describe)
- –°–ø–∏—Å–æ–∫ —Ç–æ–ø–∏–∫–æ–≤ (--list)
- –ò–∑–º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (--alter)

## --bootstrap-server localhost:9092
–£–∫–∞–∑—ã–≤–∞–µ—Ç Kafka, –∫ –∫–∞–∫–æ–º—É –±—Ä–æ–∫–µ—Ä—É –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã.

## –ü—Ä–∏–º–µ—Ä—ã
–ü–æ—Å–º–æ–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–æ–ø–∏–∫–æ–≤
kafka-topics --bootstrap-server localhost:9092 --list

–°–æ–∑–¥–∞—Ç—å —Ç–æ–ø–∏–∫
kafka-topics --bootstrap-server localhost:9092 --create --topic order_create --partitions 1 --replication-factor 1

| –ö–æ–ª–æ–Ω–∫–∞           | –ó–Ω–∞—á–µ–Ω–∏–µ       | –ü–æ—è—Å–Ω–µ–Ω–∏–µ                                                                            |
|-------------------|----------------|--------------------------------------------------------------------------------------|
| Topic             | order_created  | –ò–º—è —Ç–æ–ø–∏–∫–∞                                                                           |
| PartitionCount    | 1              | "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–∞—Ä—Ç–∏—Ü–∏–π ‚Äî –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö ""–ø–æ–¥–ø–æ—Ç–æ–∫–æ–≤"" –≤–Ω—É—Ç—Ä–∏ —Ç–æ–ø–∏–∫–∞"                    |
| ReplicationFactor | 1              | –°–∫–æ–ª—å–∫–æ –∫–æ–ø–∏–π –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω–∏—Ç—Å—è (—Ñ–∞–∫—Ç–æ—Ä —Ä–µ–ø–ª–∏–∫–∞—Ü–∏–∏) ‚Äî –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏           |
| Configs           | (–ø—É—Å—Ç–æ)        | "–ö–∞—Å—Ç–æ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–ø–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, retention.ms, cleanup.policy)"                |
| Partition         | 0              | –ù–æ–º–µ—Ä –ø–∞—Ä—Ç–∏—Ü–∏–∏ (—Å 0)                                                                 |
| Leader            | 1              | "ID –±—Ä–æ–∫–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –ª–∏–¥–µ—Ä–æ–º –¥–ª—è —ç—Ç–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏ (–ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∑–∞–ø–∏—Å—å –∏ —á—Ç–µ–Ω–∏–µ)" |
| Replicas          | 1              | "–°–ø–∏—Å–æ–∫ –±—Ä–æ–∫–µ—Ä–æ–≤, –Ω–∞ –∫–æ—Ç–æ—Ä—ã—Ö —Ö—Ä–∞–Ω—è—Ç—Å—è —Ä–µ–ø–ª–∏–∫–∏ —ç—Ç–æ–π –ø–∞—Ä—Ç–∏—Ü–∏–∏"                         |
| Isr               | 1              | "In-Sync Replicas ‚Äî —Ä–µ–ø–ª–∏–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ ""–≤ —Å—Ç—Ä–æ—é"" –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã —Å –ª–∏–¥–µ—Ä–æ–º"       |

# –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è

## –ó–∞—á–µ–º –Ω—É–∂–µ–Ω key?
1. –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º
- Kafka-—Ç–æ–ø–∏–∫ = –Ω–∞–±–æ—Ä –ø–∞—Ä—Ç–∏—Ü–∏–π.
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Kafka –±–µ—Ä—ë—Ç hash(key) –∏ –∫–ª–∞–¥—ë—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º key –≤ –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ø–∞—Ä—Ç–∏—Ü–∏—é.
- –≠—Ç–æ –∑–Ω–∞—á–∏—Ç: –ø–æ—Ä—è–¥–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ –ø–∞—Ä—Ç–∏—Ü–∏–∏.
üëâ –ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å, —á—Ç–æ–±—ã –≤—Å–µ –∑–∞–∫–∞–∑—ã –æ–¥–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤—Å–µ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏–ª–∏ –≤ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ ‚Üí —Å—Ç–∞–≤—å key = userId.

2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ö–æ–Ω—Å—å—é–º–µ—Ä—ã —á–∏—Ç–∞—é—Ç —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä—Ç–∏—Ü–∏–∏.
- –ï—Å–ª–∏ –¥–≤–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º key ‚Üí –≤—Å–µ–≥–¥–∞ –ø–æ–ø–∞–¥—É—Ç –≤ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –∫–æ–Ω—Å—å—é–º–µ—Ä–∞ –≤–Ω—É—Ç—Ä–∏ –≥—Ä—É–ø–ø—ã.

3. –ú–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å key
- –¢–æ–≥–¥–∞ Kafka —Ä–∞—Å–∫–∏–¥—ã–≤–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ –ø–∞—Ä—Ç–∏—Ü–∏—è–º —Å–ª—É—á–∞–π–Ω–æ (round-robin).
- –ù–æ —Ç–æ–≥–¥–∞ –ø–æ—Ä—è–¥–æ–∫ –º–µ–∂–¥—É —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ —Å–æ–±—ã—Ç–∏—è–º–∏ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è.